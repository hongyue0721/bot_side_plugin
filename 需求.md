# 需求备份

以下内容来自用户需求原文，便于插件发布时追溯。

```
# MaiBot 博客评论自动回复插件 - AI 编程提示词
## 角色设定
你是一位资深的 MaiBot 插件开发专家，精通 Python 异步编程、MaiBot 插件系统（BasePlugin, BaseCommand, config_schema）、RESTful API 设计，以及 LLM 集成。你非常熟悉 https://github.com/internetsb/Maizone 的代码逻辑，特别是它的定时任务监控和自动回复机制。
## 项目背景
目标：为 MaiBot 开发一个独立的插件，实现「博客评论自动回复」功能。
- 博客系统部署在独立服务器上，提供 RESTful API。
- MaiBot 插件部署在另一台服务器上，通过 HTTP API 与博客系统通信。
- 访客在博客发表评论后，Bot 自动拉取评论，调用 LLM 生成回复，再写回博客。
## 技术架构
- **部署架构**：插件与博客系统物理隔离，通过 RESTful API 通信。
- **通信协议**：HTTP/HTTPS，JSON 格式。
- **认证方式**：API Token（放在请求头 X-API-KEY）。
- **MaiBot 集成**：插件必须遵守 MaiBot 官方插件规范，复用主程序配置。
## 功能需求
1. **定时拉取评论**：每隔 N 秒（可配置）从博客 API 拉取新评论。
2. **智能回复生成**：根据评论内容和文章上下文，调用 LLM 生成回复。
3. **回复写回博客**：将生成的回复通过 API 写回博客。
4. **去重机制**：确保不会重复回复同一条评论。
5. **配置化管理**：所有关键参数均可通过配置文件调整。
6. **复用主程序 prompt**：插件的人设与回复风格必须从主程序 bot_config.toml 的 [personality] 段读取，不得在插件内重复定义。
## API 契约（博客侧提供）
### 1. 获取待处理评论
**Endpoint**: `GET {blog_api_url}/api/v1/comments/pending`
**Query 参数**:
- `since`: Unix 时间戳，只返回此时间之后的评论。
**Response**:
```
{
  "code": 0,
  "message": "success",
  "data": [
    {
      "id": 123,
      "post_id": 5,
      "post_title": "如何使用 MaiBot 构建自动化博客",
      "post_summary": "今天学习了 MaiBot 的插件开发...",
      "visitor_name": "Alice",
      "content": "写得很详细，谢谢分享！",
      "created_at": "2025-12-22T10:00:00Z"
    }
  ]
}
```
### 2. 提交回复
**Endpoint**: `POST {blog_api_url}/api/v1/comments`
**Request Headers**:
- `X-API-KEY: {blog_api_key}`
**Request Body**:
```
{
  "post_id": 5,
  "parent_id": 123,
  "author": "bot",
  "content": "不客气，有疑问随时问我！"
}
```
**Response**:
```
{
  "code": 0,
  "message": "success",
  "data": {
    "id": 456,
    "created_at": "2025-12-22T10:05:00Z"
  }
}
```
```
